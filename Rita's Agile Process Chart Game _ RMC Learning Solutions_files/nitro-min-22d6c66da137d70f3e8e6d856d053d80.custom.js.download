(function(T){T(function(){var n=0;C();T("body").on("click",".et_social_share",function(){var e=T(this),t=e.data("social_type"),a=e.data("social_name"),i="media"==t?e.data("social_link"):e.prop("href");_(a,e);if("like"===a){return false}var o=T(window).width()/2-550/2;var s=T(window).height()/2-450/2;var n=window.open(i,"","scrollbars=1, height=450, width=550, left="+o+", top="+s);if(window.focus){n.focus()}return false});T(".et_social_follow").on("click",function(){var e=T(this),t=e.data("social_name");_(t,e);if("like"===t){return false}});T("body").on("click",".et_social_share_pinterest",function(){if(T(this).hasClass("et_social_pin_all")){var e=T(window).width()/2-550/2,t=T(window).height()/2-450/2,a=T(this).attr("href"),i=window.open(a,"","scrollbars=1, height=450, width=550, left="+e+", top="+t);if(window.focus){i.focus()}}else{T(".et_social_pin_images_outer").fadeToggle(400)}return false});function e(e){var t=window.location.search.substring(1);var a=t.split("&");for(var i=0;i<a.length;i++){var o=a[i].split("=");if(o[0]==e){return o[1]}}}function _(t,a){var i=a.data("social_type"),o="media"==i?a.closest(".et_social_media_wrapper").find("img").attr("src"):"",s=a.data("post_id"),e=a.data("location"),n="";n=JSON.stringify({action:i,network:t,media_url:o,post_id:s,location:e});T.ajax({type:"POST",url:monarchSettings.ajaxurl,data:{action:"add_stats_record_db",stats_data_array:n,add_stats_nonce:monarchSettings.stats_nonce},success:function(e){if(true==e){if("like"===i){c(a,"",s,t,"like")}if("media"===i){l(a.closest(".et_social_media_wrapper"));c(a,o,s,t,"media")}}}})}function t(t){var e=t.data("social_name"),a=t.data("min_count"),i=t.data("post_id"),o=monarchSettings.pageurl!==""?monarchSettings.pageurl:window.location.href,s=t.find(".et_social_network_label"),n=0!=s.length?s:t;$share_count_data=JSON.stringify({network:e,min_count:a,post_id:i,url:o});T.ajax({type:"POST",url:monarchSettings.ajaxurl,data:{action:"get_shares_count",share_count_array:$share_count_data,get_share_counts_nonce:monarchSettings.share_counts},beforeSend:function(e){n.append('<span class="et_social_placeholder"></span>')},success:function(e){t.find("span.et_social_placeholder").remove();n.append(e)}})}function a(e){var t=e.data("post_id"),a=monarchSettings.pageurl!==""?monarchSettings.pageurl:window.location.href,i=e;$share_total_count_data=JSON.stringify({post_id:t,url:a});T.ajax({type:"POST",url:monarchSettings.ajaxurl,data:{action:"get_total_shares",share_total_count_array:$share_total_count_data,get_total_counts_nonce:monarchSettings.total_counts},beforeSend:function(e){i.append('<span class="et_social_placeholder"></span>')},success:function(e){i.find("span.et_social_placeholder").remove();i.append(e)}})}function i(t){var e=t.data("network"),a=t.data("min_count"),i=t.data("index"),o=t;$follow_count_data=JSON.stringify({network:e,min_count:a,index:i});T.ajax({type:"POST",url:monarchSettings.ajaxurl,data:{action:"get_follow_counts",follow_count_array:$follow_count_data,get_follow_counts_nonce:monarchSettings.follow_counts},beforeSend:function(e){o.append('<span class="et_social_placeholder"></span>')},success:function(e){t.find("span.et_social_placeholder").remove();o.append(e)}})}function o(e){var t=e;T.ajax({type:"POST",url:monarchSettings.ajaxurl,data:{action:"get_follow_total",get_total_counts_nonce:monarchSettings.total_counts},beforeSend:function(e){t.append('<span class="et_social_placeholder"></span>')},success:function(e){t.find("span.et_social_placeholder").remove();t.append(e)}})}if(T(".et_social_display_follow_counts").length){T(".et_social_display_follow_counts").each(function(){i(T(this))})}if(T(".et_social_follow_total").length){T(".et_social_follow_total").each(function(){o(T(this))})}if(T(".et_social_total_share").length){T(".et_social_total_share").each(function(){a(T(this))})}if(T(".et_social_display_count").length){T(".et_social_display_count").each(function(){t(T(this))})}if(T(".et_social_media_wrapper").length&&T(".et_social_media_wrapper .et_social_totalcount").length){T(".et_social_media_wrapper").each(function(){l(T(this))})}if(T(".et_social_media_wrapper").length&&T(".et_social_media_wrapper .et_social_withcounts").length){T(".et_social_media_wrapper .et_social_share").each(function(){var e=T(this),t=e.closest(".et_social_media_wrapper").find("img").attr("src"),a=e.data("post_id"),i=e.data("social_name");c(e,t,a,i,"media")})}function l(e){if(T(".et_social_totalcount").length){var t=e,a=t.find("img").attr("src"),i=t.find(".et_social_share").first().data("post_id"),o=JSON.stringify({media_url:a,post_id:i});T.ajax({type:"POST",url:monarchSettings.ajaxurl,data:{action:"get_media_shares_total",media_total:o,get_media_shares_total_nonce:monarchSettings.media_total},success:function(e){t.find(".et_social_totalcount_count").empty().append(e)}})}}function c(t,e,a,i,o){if(T(".et_social_withcounts").length){var s=JSON.stringify({media_url:e,post_id:a,network:i,action:o});T.ajax({type:"POST",url:monarchSettings.ajaxurl,data:{action:"get_shares_single",media_single:s,get_media_shares_nonce:monarchSettings.media_single},success:function(e){t.find(".et_social_count span").not(".et_social_count_label").empty().append(e)}})}}function s(e){var t=e*24*60*60*1e3;var a=new Date;a.setTime(a.getTime()+t);return"; expires="+a.toUTCString()}function r(e,t){return d()[e]===t}function d(){var e=document.cookie.split("; ");var t={};for(var a=e.length-1;a>=0;a--){var i=e[a].split("=");t[i[0]]=i[1]}return t}function p(e){cookieExpire=s(e);document.cookie="etSocialCookie=true"+cookieExpire}function f(e,t){setTimeout(function(){e.addClass("et_social_visible et_social_animated");if(T(".et_social_resize").length){T(".et_social_resize").each(function(){b(T(this))})}},t)}function h(e,t){var a=e;if(!a.hasClass("et_social_animated")){var i=a.data("cookie_duration")?a.data("cookie_duration"):false,o=t;if(false!==i&&!r("etSocialCookie","true")||false==i){f(a,o);if(false!==i){p(i)}}}}if("true"==e("et_monarch_popup")){T(".et_social_after_comment").each(function(){var e=T(this);h(e,0)})}if(T(".et_social_auto_popup").length){T(".et_social_auto_popup").each(function(){var e=T(this);h(e,""!==e.data("delay")?e.data("delay")*1e3:0)})}T(".et_social_pinterest_window .et_social_close").on("click",function(){T(".et_social_pin_images_outer").fadeToggle(400)});T("body").on("click",".et_social_icon_cancel",function(){var e=T(this);if(e.parent().hasClass("et_social_flyin")){$popup=e.parent()}else{$popup=e.parent().parent();if($popup.hasClass("et_social_all_networks_popup")){n=0}}$popup.addClass("et_social_fadeout");setTimeout(function(){$popup.remove()},800);return false});if(T(".et_monarch_after_order").length){T(".et_social_after_purchase").each(function(){var e=T(this);if(!e.hasClass("et_social_animated")){var t=e.data("cookie_duration")?e.data("cookie_duration"):false,a=0;if(false!==t&&!r("etSocialCookie","true")||false==t){f(e,a);if(false!==t){p(t)}}}})}if(T(".et_social_trigger_bottom").length){T(".et_social_trigger_bottom").each(function(){u(T(this),true)})}if(T(".et_social_scroll").length){T(".et_social_scroll").each(function(){u(T(this),false)})}function u(e,t){var a=e;if(!a.hasClass("et_social_animated")){var i=a.data("cookie_duration")?a.data("cookie_duration"):false;if(true==t){var o=T(".et_social_bottom_trigger").length?T(".et_social_bottom_trigger").offset().top:T(document).height()-500}else{var s=e.data("scroll_pos")>100?100:e.data("scroll_pos"),o=100==s?T(document).height()-10:T(document).height()*s/100}T(window).on("scroll",function(){if(false!==i&&!r("etSocialCookie","true")||false==i){if(T(window).scrollTop()+T(window).height()>o){a.addClass("et_social_visible et_social_animated");if(T(".et_social_resize").length){T(".et_social_resize").each(function(){b(T(this))})}if(false!==i){p(i)}}}})}}if(T(".et_social_trigger_idle").length){T(".et_social_trigger_idle").each(function(){var e=T(this);if(!e.hasClass("et_social_animated")){var t=e.data("cookie_duration")?e.data("cookie_duration"):false,a=""!==e.data("idle_timeout")?e.data("idle_timeout")*1e3:3e4;if(false!==t&&!r("etSocialCookie","true")||false==t){T(document).idleTimer(a);T(document).on("idle.idleTimer",function(){f(e,0)});if(false!==t){p(t)}}}})}T(".et_social_heading, .et_social_mobile_button").on("click",function(){$this_mobile_div=T(".et_social_mobile");$this_mobile_div.css({display:"block"});T(".et_social_mobile_button").removeClass("et_social_active_button");if($this_mobile_div.hasClass("et_social_opened")){$this_mobile_div.find(".et_social_networks").slideToggle(600);$this_mobile_div.removeClass("et_social_opened").addClass("et_social_closed");T(".et_social_mobile_overlay").removeClass("et_social_visible_overlay");T(".et_social_mobile_overlay").fadeToggle(600)}else{$this_mobile_div.removeClass("et_social_closed").addClass("et_social_opened");$this_mobile_div.find(".et_social_networks").slideToggle(600);T(".et_social_mobile_overlay").addClass("et_social_visible_overlay").css({display:"block"})}});T(".et_social_mobile .et_social_close").on("click",function(){$mobile_div=T(".et_social_mobile");$mobile_div.fadeToggle(600);T(".et_social_mobile_button").addClass("et_social_active_button");if($mobile_div.hasClass("et_social_opened")){T(".et_social_mobile_overlay").fadeToggle(600);$mobile_div.removeClass("et_social_opened");$mobile_div.find(".et_social_networks").fadeToggle(600)}});if(T(".et_social_inline").length){if(T("body").hasClass("et_pb_pagebuilder_layout")){var g=T(".et_social_inline_top"),m=T(".et_social_inline_bottom"),w='<div class="et_pb_row"><div class="et_pb_column et_pb_column_4_4"></div></div>';if(T(".et-l--post").first().length>0){var v=T(".et-l--post .et_pb_section").not(".et_pb_fullwidth_section")}else{var v=T(".et_pb_section:not(.et-l .et_pb_section)").not(".et_pb_fullwidth_section")}if(v.length>0&&g.length){v.first().prepend(w).find(".et_pb_row").first().find(".et_pb_column").append(g)}if(v.length>0&&m.length){v.last().append(w).find(".et_pb_row").last().find(".et_pb_column").append(m)}}}function b(l){setTimeout(function(){var e=l,t=e.find(".et_social_networks"),a=e.find(".et_social_header").outerHeight()||0,i=e.find(".et_social_totalcount").height(),o=0<i?20:0;e.height(e.find(".et_social_icons_container").innerHeight()+a+i+20+o);var s=e.hasClass("et_social_popup_content")?T(window).height():T(window).height()-60;if(e.hasClass("et_social_popup_content")&&768<T(window).width()){s=s-50}e.css({"max-height":s+"px"});if(e.hasClass("et_social_popup_content")){var n=T(window).height()/2-e.innerHeight()/2;e.css({top:n+"px"})}var _=e.height()-a+i-o;t.height(_)},400)}function k(){setTimeout(function(){var e=T(".et_social_mobile");if(!e.hasClass("et_social_opened")){T(".et_social_mobile .et_social_networks").css({display:"block"})}if(T(".et_social_active_button").length){e.css({display:"block"})}var t=e.find(".et_social_icons_container").innerHeight()+45;if(!e.hasClass("et_social_opened")){T(".et_social_mobile .et_social_networks").css({display:"none"})}if(T(".et_social_active_button").length){e.css({display:"none"})}e.find(".et_social_networks").css({"max-height":t+"px",height:t+"px"});if(T(window).height()<t){var a=T(window).height()-e.find(".et_social_heading").innerHeight()+10;e.find(".et_social_networks").css({height:a+"px"})}},400)}function y(){if(T(".et_social_sidebar_networks").length){var e=T(".et_social_sidebar_networks"),t=T(window).height()/2-e.innerHeight()/2;t=0>t?0:t;e.css({top:t+"px"})}}function S(){if(T(".et_social_media_wrapper").length){T(".et_social_media_wrapper").each(function(){var e=T(this),t=e.find(".et_social_media"),a=e.find("img"),i=a.position(),o=typeof i!=="undefined"?i.left:0,s=a.height(),n=a.width(),_=e.find(".et_social_networks").innerHeight();e.addClass(a.attr("class"));t.css({"max-height":s+"px"});t.css({height:_+50+"px"});t.width(n-80);if(0!==o){t.css({left:o+20+"px"})}});x()}}function C(){var e=T(".et_pb_gallery_grid .et_social_media_wrapper");if(0>e.length){return}e.each(function(){var e=T(this);var t=e.closest(".et_pb_gallery_image");var a=t.find(".et_overlay");if(0<a.length){e.append(a)}})}function x(){var e=T(".et_pb_gallery_fullwidth .et_social_media_wrapper");if(0>e.length){return}var t=T(".et_pb_gallery_fullwidth");t.each(function(){var e=T(this);var t=e.find(".et_social_media_wrapper .et_social_media");if(0>t.length){return}var a=t.first();var i=a.width();var o=a.css("height");var s=a.css("max-height");t.width(i-80);t.height(o);t.css({"max-height":s+"px"})})}T("body").on("click",".et_social_open_all",function(){n++;if(1==n){var a=T(this),e=a.data("page_id"),t=a.data("permalink"),i=a.data("title"),o=typeof a.data("media")!=="undefined"?a.data("media"):"",s="popup"==a.data("location")?"true":"false";T.ajax({type:"POST",url:monarchSettings.ajaxurl,data:{action:"generate_all_networks_popup",all_networks_page_id:e,all_networks_link:t,all_networks_title:i,all_networks_media:o,is_popup:s,generate_all_window_nonce:monarchSettings.generate_all_window_nonce},success:function(e){if("false"==s){T("body").append(e);f(T(".et_social_all_networks_popup"),1)}else{var t=a.parent().closest(".et_social_popup_content");a.parent().replaceWith(e);b(t);n=0}}})}return false});k();y();T(window).on("resize",()=>{if(T(".et_social_resize").length){T(".et_social_resize").each(function(){b(T(this))})}if(T(".et_social_mobile")){k()}if(T(".et_social_sidebar_networks").length){y()}S()});T(".et_social_hide_sidebar").on("click",function(){T(".et_social_hide_sidebar").toggleClass("et_social_hidden_sidebar");T(".et_social_sidebar_networks").toggleClass("et_social_hidden_sidebar et_social_visible_sidebar")});T(window).on("load",function(){S();if(T(".et_social_pin_images").length&&(T(".et_social_all_button").length||T(".et_social_pinterest").length)){var e=T(".et_social_pin_images"),o=e.data("permalink"),s=e.data("title"),n=e.data("post_id"),_=0;T("img").each(function(){if(!T(this).hasClass("avatar")){var e=T(this).attr("src"),t=T(this).attr("alt");if(""!=e){var a="http://www.pinterest.com/pin/create/button/?url="+o+"&media="+e+"&description="+s,i='<div class="et_social_pin_image"><a href="'+a+'" rel="nofollow" class="et_social_icon et_social_share" data-social_name="pinterest" data-post_id="'+n+'" data-social_type="share"><img src="'+e+'" alt="'+t+'"/><span class="et_social_pin_overlay et_social_icon"></span></a></div>';T(".et_social_pin_images").append(i);_++}}});if(0==_){T(".et_social_pin_images").append(monarchSettings.no_img_message)}}})})})(jQuery);